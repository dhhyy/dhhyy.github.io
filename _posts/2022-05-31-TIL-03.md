---
layout: post
title: [TIL_20220531]
excerpt: "20220527 TIL"

categories:
  - Blog
tags:
  - [Blog, Linux, Bash]

toc: true
toc_sticky: true
 
date: 2022-05-31
last_modified_at: 2022-05-31
---

## [Bash]

### Bash - $ë³€ìˆ˜ì²˜ë¦¬
1. Bash ì‰˜ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ pythonì—ì„œì˜ f string ì²˜ë¦¬ ê°™ì€ ë¬¸ìì—´ ì²˜ë¦¬ ê¸°ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤. 
2. ê¸°ë³¸ ì˜ˆì œëŠ” ë°‘ì˜ ë‚´ìš©ê³¼ ê°™ìŠµë‹ˆë‹¤.
```bash
â¯ echo "Hello, World"
Hello, World
â¯ str="Hello, World"                
â¯ echo $str                       
Hello, World
â¯ echo ${str}                      
Hello, World
â¯ echo "${str}"                    
Hello, World
```
3. Bash ì‰˜ì—ì„œëŠ” quotation marks ì¸ì‹ì´ ì¤‘ìš”í•œ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì˜ ì •ë¦¬ëœ ë¸”ë¡œê·¸ê°€ ìˆì–´ ê·¸ ë¶€ë¶„ì„ ì°¸ê³ í•˜ì˜€ìŠµë‹ˆë‹¤.
4. ìœ„ì—ì„œ ë³´ì‹œëŠ” ê²ƒì²˜ëŸ¼ ì¿¼í…Œì´ì…˜ì„ ë„£ê±°ë‚˜ ë„£ì§€ ì•Šê±°ë‚˜ ë³€ìˆ˜ ì²˜ë¦¬ëŠ” ë˜‘ê°™ì´ ë™ì‘í•©ë‹ˆë‹¤.
5. ì´ì œ printfë¥¼ ì„ì€ í‘œí˜„ì„ ì‚´í´ë´…ë‹ˆë‹¤.
```bash
â¯ str="Hello, Bash\n"               
printf "$str"                     
Hello, Bash
â¯ printf $str                       
Hello, Bash
â¯ printf "$str"                     
Hello, Bash
â¯ printf "${str}"                   
Hello, Bash
```
6. ì—¬ê¸°ì„œë„ ë‹¤ ê°™ê²Œ ë™ì‘í•©ë‹ˆë‹¤ !
### printf + ê´„í˜¸ + quotation
1.  pythonì˜ ë¬¸ìì—´ í¬ë§¤íŒ…ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” í‘œí˜„ì‹ì…ë‹ˆë‹¤.
2.  ê¸°ë³¸ í˜•ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```bash
printf [-v var] format [arguments]
```
- ì‚¬ìš©ë²• ì •ë¦¬
```bash
â¯ printf "issues: %s\\nClosed issues: %s\\n" "35" "65"
issues: 35
Closed issues: 65

â¯ printf "issues: %s, Closed issues: %s\\n" "35" "65"
issues: 35, Closed issues: 65
```

```bash
â¯ printf "[%s\\t%s]\\n" "First" "Second"
[First	Second]
```

## [Bash - jq]

1.  í˜„ì¬ íšŒì‚¬ì—ì„œ í•˜ê³  ìˆëŠ” í”„ë¡œì íŠ¸ëŠ” CentOS í™˜ê²½ì—ì„œ ì‰˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•˜ê±°ë‚˜, curlë¥¼ ë³´ë‚´ APIë¥¼ í™•ì¸í•´ì•¼ í•˜ëŠ” ìƒí™©ì…ë‹ˆë‹¤.
2.  APIì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ì„ ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©ì´ ë˜ëŠ” ë°ì´í„° í¬ë§·ì´ JSONì´ë©°, jqë¥¼ ì‚¬ìš©í•˜ë©´ JSON í¬ë§·ì˜ ë°ì´í„°ë¥¼ ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3.  ë°‘ì˜ Referenceì—ë„ ì¶”ê°€ë¥¼ í•˜ê² ì§€ë§Œ, ì´ ê¸€ì˜ jq ë¶€ë¶„ì€ [JSON í”„ë¡œì„¸ì„œ jq](https://www.44bits.io/ko/post/cli_json_processor_jq_basic_syntax)ì´ ê¸€ì„ ë³´ê³  ì°¸ê³ í•˜ì˜€ìŠµë‹ˆë‹¤. ì •ë¦¬ê°€ í•„ìš”í•œ ë‚´ìš©ì´ ìˆë‹¤ë©´ ì¤‘ê°„ ì¤‘ê°„ì— ì¸ìš©ì„ í•˜ë©° ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

### jq + echo ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì…ë ¥

```bash
â¯ echo 'null' | jq                  
null
â¯ echo '"string"' | jq              
"string"
â¯ echo '44' | jq                    
44
```
- jqë¥¼ ì‚¬ìš©í•˜ë©´, ìœ„ì™€ ê°™ì€ ë¬¸ë²•ìœ¼ë¡œ ì‘ì„±ì„ í•´ì•¼í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ë°”ë¡œ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. {} ì•ˆì— ì‘ì„±í•  ë•Œ, ì €ëŠ” ì´ ë¶€ë¶„ì„ ëª°ë¼ì„œ ì´ ë¶€ë¶„ì„ êµ‰ì¥íˆ ì–´ë ¤ì› ìŠµë‹ˆë‹¤. 

###  jq + echo ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ì…ë ¥ ì‹œ ì—ëŸ¬ ìƒí™© ë¶„ì„
```bash
â¯ echo 'string' | jq                
parse error: Invalid numeric literal at line 2, column 0
â¯ echo "string" | jq
parse error: Invalid numeric literal at line 2, column 0
â¯ echo '"string"' | jq     
"string"
```
- ê°™ì€ ë‚´ìš©ì…ë‹ˆë‹¤. quotationì„ ì§€í‚¤ì§€ ì•Šìœ¼ë©´ ìœ„ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.

```bash
â¯ jq '.'                                                                       
{"key" : "value"}          <-----ì…ë ¥
{                          <-----ì¶œë ¥
  "key": "value"
}
```
- ë³´ê¸° ì¢‹ê²Œ ê°€ë‹¤ë“¬ì–´ ì¶œë ¥í•´ì¤ë‹ˆë‹¤.

### jq ë³€ìˆ˜ì— ë‹´ì•„ì„œ ì¶œë ¥
```bash
â¯ echo '{"key" : "value"}' > test.json                                          â¯ jq '.' test.json                                                             
{
  "key": "value"
}
```

### jq pipe ì—°ì‚°ì ì‚¬ìš©
```bash
â¯ echo '{"key": "value"}' | jq '.'                                             
{
  "key": "value"
}
```

### jq + curl
```bash
â¯ curl -s 'https://api.github.com/users/dhhyy' | jq '.'                       
{
  "login": "dhhyy",
  "id": 40171383,
  "node_id": "MDQ6VXNlcjQwMTcxMzgz",
  "avatar_url": "https://avatars.githubusercontent.com/u/40171383?v=4",
  "gravatar_id": "",
  "url": "https://api.github.com/users/dhhyy",
  "html_url": "https://github.com/dhhyy",
  "followers_url": "https://api.github.com/users/dhhyy/followers",
  "following_url": "https://api.github.com/users/dhhyy/following{/other_user}",
  "gists_url": "https://api.github.com/users/dhhyy/gists{/gist_id}",
  "starred_url": "https://api.github.com/users/dhhyy/starred{/owner}{/repo}",
  "subscriptions_url": "https://api.github.com/users/dhhyy/subscriptions",
  "organizations_url": "https://api.github.com/users/dhhyy/orgs",
  "repos_url": "https://api.github.com/users/dhhyy/repos",
  "events_url": "https://api.github.com/users/dhhyy/events{/privacy}",
  "received_events_url": "https://api.github.com/users/dhhyy/received_events",
  "type": "User",
  "site_admin": false,
  "name": null,
  "company": null,
  "blog": "",
  "location": null,
  "email": null,
  "hireable": null,
  "bio": null,
  "twitter_username": null,
  "public_repos": 12,
  "public_gists": 0,
  "followers": 0,
  "following": 0,
  "created_at": "2018-06-11T12:49:52Z",
  "updated_at": "2022-05-11T05:50:16Z"
}
```
- ì›¹ì—ì„œ ë°›ì€ JSON ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### jq - ë³´ê¸° í˜ë“  ìë£Œ ì²˜ë¦¬
```bash
â¯ echo '{"bridge":{"IPAMConfig":null,"Links":null,"Aliases":null,"NetworkID":"6d583450be96208b
"EndpointID":"d6138701512082a8d3","Gateway":"172.17.0.1","IPAddress":"172.17.0.2","IPPrefixLen":16,"IPv6Gateway":"","GlobalIPv6Address":"","GlobalIPv6PrefixLen":0,"MacAddress":"02:55:ac:11:00:02","DriverOpts":null}}' | jq '.'
{
  "bridge": {
    "IPAMConfig": null,
    "Links": null,
    "Aliases": null,
    "NetworkID": "6d583450be96208b0",
    "EndpointID": "d6138701512082a8d3",
    "Gateway": "172.17.0.1",
    "IPAddress": "172.17.0.2",
    "IPPrefixLen": 16,
    "IPv6Gateway": "",
    "GlobalIPv6Address": "",
    "GlobalIPv6PrefixLen": 0,
    "MacAddress": "02:55:ac:11:00:02",
    "DriverOpts": null
  }
}
```

### [note] jq - í™‘ë”°ì˜´í‘œ ì‚¬ìš©í•˜ê¸°
> ì…¸ ìœ„ì—ì„œ ë”°ì˜´í‘œ í•´ì„ì€ ìì£¼ í—·ê°ˆë¦¬ëŠ” ë¶€ë¶„ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤. jqë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì˜ëª» í•´ì„ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ echoë‚˜ jqì˜ ì¸ìë¥¼ ë°˜ë“œì‹œ í™‘ë”°ì˜´í‘œ(`'`)ë¡œ ê°ì‹¸ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤. ì…¸ì—ì„œ í™‘ë”°ì˜´í‘œ ì•ˆì˜ ë¬¸ìì—´ì€ ë³€í˜•ë˜ì§€ ì•Šê³  ê±°ì˜ ê·¸ëŒ€ë¡œ ì´ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ JSON ë¬¸ìì—´ì„ ë§Œë“¤ê³ ì í•  ë•ŒÂ `'String'`,Â `"String"`ëŠ” ëª¨ë‘ ì˜ë„í•œ ëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.Â `'"String"'`ì™€ ê°™ì´ í™‘ë”°ì˜´í‘œ ì•ˆì—ì„œ ë‹¤ì‹œ ìŒë”°ì˜´í‘œë¡œ ê°ì‹¸ì•¼ë§Œ JSON ë¬¸ìì—´ë¡œ í•´ì„ë©ë‹ˆë‹¤.
> ì¶œì²˜ : [JSON í”„ë¡œì„¸ì„œ jq](https://www.44bits.io/ko/post/cli_json_processor_jq_basic_syntax)

### jq - ì˜¤ë¸Œì íŠ¸ ì†ì„± í•„í„°
```bash
â¯ echo '{"foo": "bar", "hoge": "piyo"}' | jq
{
  "foo": "bar",
  "hoge": "piyo"
}
â¯ echo '{"foo": "bar", "hoge": "piyo"}' | jq '.foo'
"bar"
```

### jq - ì˜¤ë¸Œì íŠ¸ ì†ì„± í•„í„°, ë§Œì•½ ê¸°í˜¸ê°€ ìˆì„ ì‹œ
```bash
â¯ echo '{"foo<": "bar", "hoge": "piyo"}' | jq '.foo<'
jq: error: syntax error, unexpected $end (Unix shell quoting issues?) at <top-level>, line 1:
.foo<
jq: 1 compile error
 â¯ echo '{"foo<": "bar", "hoge": "piyo"}' | jq '[".foo<"]'
[
  ".foo<"
]
```

ğŸ”¥Â ë¦¬ìŠ¤íŠ¸ë¡œ ë‚˜ì˜¤ëŠ”ë°?

## Reference
[Quotes](https://mug896.github.io/bash-shell/quotes.html) : ë§¤ìš° ìì„¸í•˜ê²Œ ì„¤ëª…ì´ ë˜ì–´ ìˆì–´ ë§ì€ ë„ì›€ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.
